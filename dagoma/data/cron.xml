<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record model="ir.cron" id="cron_check_batch_state">
        <field name="name">Check batch state</field>
        <field name="interval_number">1</field>
        <field name="interval_type">days</field>
        <field name="numbercall">-1</field>
        <field name="model_id" ref="stock_picking_batch.model_stock_picking_batch"/>
        <field name="state">code</field>
        <field name="code">model._cron_check_batch_status()</field>
        <!-- <field name="code">    
        <![CDATA[      
batch_in_progress = env.search([('state','=','in_progress')])

for b in batch_in_progress:
    pick_done = True

    for p in b.picking_ids:
        if p.state not in ('done','cancel'):
            pick_done = False
            p.write({'batch_id': None})
    
    if pick_done:
        b.done
        ]]>
        </field> -->
    </record>
</odoo>